# Generalist Models Configuration

models:
  # GPT-4 Vision
  gpt4v:
    name: "gpt-4-vision-preview"
    type: "api"
    provider: "openai"
    api_key: "${OPENAI_API_KEY}"
    max_tokens: 1024
    temperature: 0.0
    top_p: 1.0
    
    # Few-shot prompting settings
    few_shot:
      enabled: true
      num_examples: 3
      example_selection: "random"  # random, similar, diverse
    
    # Rate limiting
    rate_limit:
      requests_per_minute: 10
      retry_attempts: 3
      retry_delay: 5

  # Gemini 1.5 Pro Vision
  gemini:
    name: "gemini-1.5-pro"
    type: "api"
    provider: "google"
    api_key: "${GOOGLE_API_KEY}"
    max_tokens: 1024
    temperature: 0.0
    top_p: 1.0
    
    few_shot:
      enabled: true
      num_examples: 3
      example_selection: "random"
    
    rate_limit:
      requests_per_minute: 15
      retry_attempts: 3
      retry_delay: 5

  # Llama-3 Vision (Local)
  llama3:
    name: "meta-llama/Llama-3-8B-Instruct"
    type: "local"
    provider: "huggingface"
    
    # Model loading settings
    loading:
      device_map: "auto"
      torch_dtype: "float16"
      load_in_4bit: true
      use_flash_attention: true
    
    # Generation settings
    generation:
      max_new_tokens: 512
      temperature: 0.0
      top_p: 1.0
      do_sample: false
    
    few_shot:
      enabled: true
      num_examples: 3

# Prompts for generalist models
prompts:
  # Report Generation
  report_generation:
    system: |
      You are an expert radiologist. Analyze the provided chest X-ray image 
      and generate a detailed radiology report. Focus on identifying any 
      abnormalities, their location, and clinical significance.
    
    user: |
      Please analyze this chest X-ray and provide a radiology report with:
      1. FINDINGS: Detailed description of observations
      2. IMPRESSION: Summary of key findings and clinical interpretation
    
    few_shot_template: |
      Example {idx}:
      [Image provided]
      Report:
      FINDINGS: {findings}
      IMPRESSION: {impression}
  
  # Visual Question Answering
  vqa:
    system: |
      You are an expert radiologist. Answer the following question about 
      the provided medical image accurately and concisely.
    
    user: |
      Question: {question}
      Please provide a clear and accurate answer based on the image.
  
  # Grounding
  grounding:
    system: |
      You are an expert radiologist. Identify and locate the mentioned 
      finding in the image. Provide coordinates for the bounding box.
    
    user: |
      Finding: {finding}
      Please identify the location of this finding in the image and 
      provide bounding box coordinates [x_min, y_min, x_max, y_max].
